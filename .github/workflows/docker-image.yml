name: Docker Image CI

on: [push]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Intro to job runner
      run: |
            echo "Event:${{ github.event_name }}"
            echo "os:${{ runner.os }} server."
            echo "Repository:${{ github.repository }}:${{ github.ref_name }}."

    - name: List files in the repository
      run: |
        ls ${{ github.workspace }}
#    - name: Build the Docker image
#      run: docker build . --file docker/Dockerfile --tag ghcr.io/${{ github.repository }}:${{ github.ref_name }}
    - name: push-to-ghcr
      # You may pin to the exact commit or the version.
      # uses: macbre/push-to-ghcr@d45c4b8f5a72d7fe21f6b832c42d05c29356c840
      uses: macbre/push-to-ghcr@v8
      with:
        github_token: # Your secrets.GITHUB_TOKEN
          secrets.pts
        image_name:
          ${{ github.repository }}
        dockerfile: # optional, default is ./Dockerfile
          docker/Dockerfile

#    - name: Build and push Docker images
#        # You may pin to the exact commit or the version.
#        # uses: docker/build-push-action@e551b19e49efd4e98792db7592c17c09b89db8d8
#        uses: docker/build-push-action@v3.0.0
#        with:
#          file: # optional: Push is a shorthand for --output=type=registry
#            docker/Dockerfile
#          push: # optional, default is false
#            true
#          tags:
#            ghcr.io/${{ github.repository }}:${{ github.ref_name }}
#    #        github-token: # optional, default is ${{ github.token }}
#    #          ${{ secrets.pta }}